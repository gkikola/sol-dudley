\chapter{The Divisors of an Integer}

\section{Exercises}

\Exercise1 Verify that the table of values for $d(n)$ is correct as
far as it goes, and complete it.
\begin{solution}
  For small values of $n$, we can simply test divisibility by each
  positive integer up to $n/2$. The completed table follows.
  \begin{center}
    \begin{tabular}{r|rrrrrrrrrrrrrrrr}
      $n$ & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10
      & 11 & 12 & 13 & 14 & 15 & 16 \\
      $d(n)$ & 1 & 2 & 2 & 3 & 2 & 4 & 2 & 4 & 3 & 4
      & 2 & 6 & 2 & 4 & 4 & 5
    \end{tabular}
  \end{center}
\end{solution}

\Exercise2 What is $d(p^3)$? Generalize to $d(p^n)$,
$n = 4, 5, \dots$.
\begin{solution}
  For any prime $p$, the divisors of $p^3$ are $1$, $p$, $p^2$, and
  $p^3$. These are the only divisors, so $d(p^3) = 4$.

  In general, $d(p^n) = n + 1$. For, if $p^n$ has a divisor $a$ that
  is not of the form $p^i$ for some nonnegative $i$, then this divisor
  $a$ must contain some prime factor $q$ distinct from $p$. But if
  $q\mid a$ then $q\mid p^n$. By Lemma~6 of Section~2, it follows that
  $q\mid p$ as well. Therefore $p$ is a prime which contains a smaller
  prime as a factor, which is impossible. This contradiction shows
  that the only divisors of $p^n$ have the form $p^i$, where
  $i = 0, 1, \dots, n$.
\end{solution}

\Exercise3 What is $d(p^3q)$? What is $d(p^nq)$ for any positive $n$?
\begin{solution}
  $p^3q$ has as its divisors $1$, $p$, $p^2$, and $p^3$, and also $q$,
  $pq$, $p^2q$, and $p^3q$, for a total of $8$ divisors.

  In general, every divisor of $p^n$ will be a divisor of $p^nq$, and
  for each such divisor, multiplying by $q$ will produce a new
  divisor. So the factor of $q$ effectively doubles the number of
  divisors. Consequently, we have
  \begin{equation*}
    d(p^nq) = 2(n + 1) = 2n + 2. \qedhere
  \end{equation*}
\end{solution}

\Exercise4 Calculate $d(240)$.
\begin{solution}
  Using Theorem~1, we have
  \begin{align*}
    d(240) &= d(2^4\cdot3\cdot5) \\
           &= d(2^4)d(3)d(5) \\
           &= 5\cdot2\cdot2 \\
           &= 20. \qedhere
  \end{align*}
\end{solution}

\Exercise5
\label{exercise:divisors:sigma-table}
Verify the table of values for $\sigma(n)$ is correct as far as it
goes, and complete it.
\begin{solution}
  To compute $\sigma(n)$, we can list out the divisors of $n$ and then
  add them up. For example, for $\sigma(9)$ we compute $1 + 3 + 9$ and
  get a value of $13$. The completed table follows.
  \begin{center}
    \begin{tabular}{r|rrrrrrrrrrrrrr}
      $n$ & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10
      & 11 & 12 & 13 & 14 \\
      $\sigma(n)$ & 1 & 3 & 4 & 7 & 6 & 12 & 8 & 15 & 13 & 18
      & 12 & 28 & 14 & 24
    \end{tabular}
  \end{center}
\end{solution}

\Exercise6 What is $\sigma(p^3)$? $\sigma(pq)$, where $p$ and $q$ are
different primes?
\begin{solution}
  For $p^3$ we get
  \begin{equation*}
    \sigma(p^3) = 1 + p + p^2 + p^3 = \frac{p^4 - 1}{p - 1}.
  \end{equation*}

  If $p$ and $q$ are distinct primes, then the divisors are $1$, $p$,
  $q$, and $pq$. So
  \begin{equation*}
    \sigma(pq) = 1 + p + q + pq = (1 + p) + q(1 + p) = (1 + p)(1 + q).
    \qedhere
  \end{equation*}
\end{solution}

\Exercise7
\label{exercise:divisors:sigma-2-to-n}
Show that $\sigma(2^n) = 2^{n+1} - 1$.
\begin{solution}
  The divisors of $2^n$ are $1$, $2$, $2^2$, $\dots$, $2^n$. The sum
  of these divisors forms a finite geometric series:
  \begin{equation*}
    \sigma(2^n) = \sum_{k=0}^n2^k = \frac{2^{n+1} - 1}{2 - 1} = 2^{n+1} - 1.
    \qedhere
  \end{equation*}
\end{solution}

\Exercise8 What is $\sigma(p^n)$, $n = 1, 2, \dots$?
\begin{solution}
  Again, we have a geometric series:
  \begin{equation*}
    \sigma(p^n) = \sum_{k=0}^np^k = \frac{p^{n+1} - 1}{p - 1}.
    \qedhere
  \end{equation*}
\end{solution}

\Exercise9 Calculate $\sigma(240)$.
\begin{solution}
  From Theorem~2, we get
  \begin{align*}
    \sigma(240) &= \sigma(2^4\cdot3\cdot5) \\
                &= \sigma(2^4)\sigma(3)\sigma(5) \\
                &= (2^5 - 1)\cdot4\cdot6 \\
                &= 31\cdot24 \\
                &= 744. \qedhere
  \end{align*}
\end{solution}

\Exercise{10} Let $f$ be a multiplicative function defined by
$f(p^e) = ep^{e-1}$, where $p$ is prime and $e\geq1$. Compute $f(n)$
for $n = 13, 14, \dots, 24$.
\begin{solution}
  We know that $f(n) = 1$ if $n$ is any square-free integer (that is,
  if each prime in the factorization of $n$ occurs only to the first
  power). Other values can be found using multiplicativity together
  with the defining formula $f(p^e) = ep^{e-1}$. The values are as
  follows.
  \begin{center}
    \begin{tabular}{r|rrrrrrrrrrrr}
      $n$ & 13 & 14 & 15 & 16 & 17 & 18 & 19 & 20 & 21 & 22 & 23 & 24 \\
      $f(n)$ & 1 & 1 & 1 & 32 & 1 & 6 & 1 & 4 & 1 & 1 & 1 & 12
    \end{tabular}
  \end{center}
\end{solution}

\section{Problems}

\Problem1 Calculate $d(42)$, $\sigma(42)$, $d(420)$, and
$\sigma(420)$.
\begin{solution}
  Since $42 = 2\cdot3\cdot7$, we have
  \begin{equation*}
    d(42) = 2\cdot2\cdot2 = 8
    \quad\text{and}\quad
    \sigma(42) = 3\cdot4\cdot8 = 96.
  \end{equation*}

  $420 = 2^2\cdot3\cdot5\cdot7$, so
  \begin{equation*}
    d(420) = 3\cdot2\cdot2\cdot2 = 24
    \quad\text{and}\quad
    \sigma(420) = 7\cdot4\cdot6\cdot8 = 1344. \qedhere
  \end{equation*}
\end{solution}

\Problem2 Calculate $d(540)$, $\sigma(540)$, $d(5400)$, and
$\sigma(5400)$.
\begin{solution}
  $540 = 2^2\cdot3^3\cdot5$, so
  \begin{equation*}
    d(540) = 3\cdot4\cdot2 = 24
    \quad\text{and}\quad
    \sigma(540) = 7\cdot40\cdot6 = 1680.
  \end{equation*}
  $5400 = 2^3\cdot3^3\cdot5^2$, so we get
  \begin{equation*}
    d(5400) = 4\cdot4\cdot3 = 48
    \quad\text{and}\quad
    \sigma(5400) = 15\cdot40\cdot31 = 18600. \qedhere
  \end{equation*}
\end{solution}

\Problem3 Calculate $d$ and $\sigma$ of $10115 = 5\cdot7\cdot17^2$ and
$100115 = 5\cdot20023$.
\begin{solution}
  We have
  \begin{equation*}
    d(10115) = 2\cdot2\cdot3 = 12
    \quad\text{and}\quad
    \sigma(10115) = 6\cdot8\cdot307 = 14736,
  \end{equation*}
  and
  \begin{equation*}
    d(100115) = 2\cdot2 = 4
    \quad\text{and}\quad
    \sigma(100115) = 6\cdot20024 = 120144. \qedhere
  \end{equation*}
\end{solution}

\Problem4 Calculate $d$ and $\sigma$ of $10116 = 2^2\cdot3^2\cdot281$
and $100116 = 2^2\cdot3^5\cdot103$.
\begin{solution}
  For $10116$ we get
  \begin{equation*}
    d(10116) = 3\cdot3\cdot2 = 18
    \quad\text{and}\quad
    \sigma(10116) = 7\cdot13\cdot282 = 25662.
  \end{equation*}
  And for $100116$, we have
  \begin{equation*}
    d(100116) = 3\cdot6\cdot2 = 36
  \end{equation*}
  and
  \begin{align*}
    \sigma(100116) &= 7\cdot\frac{3^6 - 1}{3 - 1}\cdot104 \\
                   &= 7\cdot364\cdot104 \\
                   &= 264992. \qedhere
  \end{align*}
\end{solution}

\Problem5 Show that $\sigma(n)$ is odd if $n$ is a power of two.
\begin{proof}
  This is immediate from
  Exercise~\ref{exercise:divisors:sigma-2-to-n}.
\end{proof}

\Problem6 Prove that if $f(n)$ is multiplicative, then so is $f(n)/n$.
\begin{proof}
  Let $s$ and $t$ be positive integers with $(s,t) = 1$. Since $f$ is
  multiplicative, we know $f(st) = f(s)f(t)$. Define the function $g$
  on the positive integers by
  \begin{equation*}
    g(n) = \frac{f(n)}n.
  \end{equation*}
  Then
  \begin{equation*}
    g(st) = \frac{f(st)}{st} = \frac{f(s)f(t)}{st}
    = \frac{f(s)}s\cdot\frac{f(t)}t = g(s)g(t),
  \end{equation*}
  so $g$ is multiplicative as well.
\end{proof}

\Problem7 What is the smallest integer $n$ such that $d(n) = 8$? Such
that $d(n) = 10$?
\begin{solution}
  If $d(n) = 8$, then $n$ has at most three distinct prime factors. If
  there are three distinct prime divisors, then the smallest value
  would be $n = 2\cdot3\cdot5 = 30$. If there are exactly two distinct
  prime divisors, one would have to have an exponent of $3$, making
  the smallest value $n = 2^3\cdot3 = 24$. Lastly, if $n$ has only a
  single prime factor, it would have to be raised to the $7$th power,
  giving $n = 2^7 = 128$. From these three possibilities, we see that
  \begin{equation*}
    \text{the smallest $n$ such that $d(n) = 8$ is $24$.}
  \end{equation*}

  For $d(n) = 10$, the reasoning is similar. We either have two
  distinct prime factors, one raised to the first power and the other
  raised to the fourth power, or only one prime factor, raised to the
  $9$th power. In the first case, the smallest such $n$ would be
  $n = 2^4\cdot3 = 48$, and in the second, $n = 2^9 = 512$. Clearly
  $48$ is the smaller of the two, so
  \begin{equation*}
    \text{the smallest $n$ such that $d(n) = 10$ is $48$.} \qedhere
  \end{equation*}
\end{solution}

\Problem8 Does $d(n) = k$ have a solution $n$ for each $k$?
\begin{solution}
  Yes. One possible choice is $n = 2^{k-1}$, though this is not
  necessarily the smallest such $n$.
\end{solution}

\Problem9 In 1644, Mersenne asked for a number with $60$
divisors. Find one smaller than 10,000.
\begin{solution}
  Our solution to the previous problem isn't quite helpful, since
  $2^{59}$ is considerably larger than 10000. But, by using more prime
  factors, each with smaller exponents, we are likely to make the
  product much smaller. So let us attempt to find a smaller $n$ with
  $d(n) = 60$.

  The prime factorization of $60$ is $2^2\cdot3\cdot5$. In order to
  get a factor of $5$ in $d(n)$, we will need an exponent of at least
  $4$. Likewise, to get a factor of $3$, we will need an exponent of
  at least $2$. The remaining factors of $2$ can be obtained using
  exponents of $1$. This suggests that we choose
  \begin{equation*}
    n = 2^4\cdot3^2\cdot5\cdot7 = 5040,
  \end{equation*}
  so that
  \begin{equation*}
    d(5040) = 5\cdot3\cdot2\cdot2 = 60.
  \end{equation*}
  Therefore $5040$ fits our criteria.
\end{solution}

\Problem{10} Find infinitely many $n$ such that $d(n) = 60$.
\begin{solution}
  Since there are infinitely many primes, we may simply choose
  $n = p^{59}$, where $p$ is some prime.

  More interesting choices for $n$ can be found by considering more
  prime factors. For example, we can write $60 = 10\cdot3\cdot2$,
  suggesting the choice $n = p^9q^2r$ where $p$, $q$, and $r$ are
  distinct primes. Different factorizations of $60$ will lead to
  different choices of $n$, as will different choices of the primes.
\end{solution}

\Problem{11} If $p$ is an odd prime, for which $k$ is
$1 + p + \cdots + p^k$ odd?
\begin{solution}
  Let $p$ be an odd prime. Then $p\equiv1\pmod{2}$, so
  \begin{equation*}
    1 + p + p^2 + \cdots + p^k \equiv 1 + 1 + 1^2 + \cdots + 1^k
    \equiv k+1 \pmod{2}.
  \end{equation*}
  It follows that $1 + p + \cdots + p^k$ is odd if and only if $k$ is
  even.
\end{solution}

\Problem{12} For which $n$ is $\sigma(n)$ odd?
\begin{solution}
  Take any prime factor $p$ dividing $n$. First suppose $p$ is an odd
  prime. If $e$ is the exponent of $p$ in the prime-power
  decomposition of $n$ ($e\geq1$), then we know by the previous
  problem that $\sigma(p^e)$ is odd if and only if $e$ is even. On the
  other hand, if $p = 2$ then $\sigma(2^e) = 2^{e+1} - 1$ is always
  odd. So the exponent on $2$ makes no difference.

  Since $\sigma$ is multiplicative, we can therefore see that
  $\sigma(n)$ will be odd if and only if every odd prime factor of $n$
  occurs with an even exponent in the prime-power decomposition of
  $n$. In other words, if $n$ can be written in the form
  \begin{equation*}
    n = 2^km^2,
    \quad\text{where $k\geq0$, $m\geq1$, and $m$ is odd},
  \end{equation*}
  then (and only then) will $\sigma(n)$ be odd.
\end{solution}

\Problem{13} If $n$ is a square, show that $d(n)$ is odd.
\begin{proof}
  Let $n = k^2$ where $k$ is a positive integer. If
  $k = p_1^{e_1}\cdots p_r^{e_r}$ is the prime-power decomposition of
  $k$, then
  \begin{align*}
    d(n) = d(k^2) &= d(p_1^{2e_1})\cdots d(p_r^{2e_r}) \\
                  &= (2e_1 + 1)\cdots(2e_r + 1),
  \end{align*}
  and since each factor $2e_i + 1$ is odd, we see that $d(n)$ must be
  odd.
\end{proof}

\Problem{14}
\label{problem:divisors:d-n-is-odd-implies-n-is-square}
If $d(n)$ is odd, show that $n$ is a square.
\begin{proof}
  If $n$ is not a square, then some exponent $e$ in its prime-power
  decomposition is odd. Then $e + 1$ is even, and therefore $d(n)$
  contains an even factor and is thus also even. By the
  contrapositive, this completes the proof.
\end{proof}

\Problem{15} Observe that $1 + 1/3 = 4/3$; $1 + 1/2 + 1/4 = 7/4$;
$1 + 1/5 = 6/5$; $1 + 1/2 + 1/3 + 1/6 = 12/6$; $1 + 1/7 = 8/7$; and
$1 + 1/2 + 1/4 + 1/8 = 15/8$. Guess and prove a theorem.
\begin{solution}
  Notice that each sum is over the reciprocals of all the divisors of
  a number $n$, and the resulting fraction has a numerator equal to
  $\sigma(n)$ (when left unreduced). This suggests that for each
  positive integer $n$,
  \begin{equation*}
    \sum_{d\mid n}\frac1d = \frac{\sigma(n)}n.
  \end{equation*}

  To prove this, fix a particular $n$. Let the positive divisors of
  $n$ be $f_1,\dots,f_k$, in order from least to greatest. Observe
  that for each $i$ with $1\leq i\leq k$, we have
  \begin{equation*}
    f_i = \frac{n}{f_{k-i}}.
  \end{equation*}
  This shows that
  \begin{equation*}
    \sum_{d\mid n}d = \sum_{d\mid n}\frac{n}d.
  \end{equation*}
  Using this fact, we have
  \begin{equation*}
    \sum_{d\mid n}\frac1d = \frac1n\sum_{d\mid n}\frac{n}d
    = \frac1n\sum_{d\mid n}d
    = \frac{\sigma(n)}n.
  \end{equation*}
  This completes the proof.
\end{solution}

\Problem{16} Find infinitely many $n$ such that
$\sigma(n) \leq \sigma(n - 1)$.
\begin{solution}
  Let $n$ be any odd prime except $3$. Then $n - 1$ is even and must
  have at least three distinct factors, namely $1$, $2$, and $n-1$. So
  \begin{align*}
    \sigma(n) = 1 + n &= 2 + (n - 1) \\
                      &< 1 + 2 + (n - 1) \\
                      &\leq \sigma(n - 1)
  \end{align*}
  as desired.
\end{solution}

\Problem{17} If $N$ is odd, how many solutions does $x^2 - y^2 = N$
have?
\begin{solution}
  For any odd $N$, the equation has exactly $2d(N)$ distinct integer
  solutions, as we will now show.

  Suppose $(x,y)$ is a solution. Let $a = x + y$ and $b = x - y$ so
  that $N = ab$. Solving this system of equations for $x$ and $y$
  gives
  \begin{equation*}
    x = \frac12(a + b) \quad\text{and}\quad y = \frac12(a - b).
  \end{equation*}
  Since $N$ is odd, both $a$ and $b$ must be odd, so all integer
  choices of $a$ and $b$ produce integer solutions for $x$ and
  $y$. Since $a$ could take positive or negative values, we have
  $2d(N)$ possible choices for $a$.

  To show that all $2d(N)$ possibilities produce distinct pairs of $x$
  and $y$, assume that $a_1$ and $a_2$ both divide $N$ so that
  $N = a_1b_1$ and $N = a_2b_2$. Now if
  \begin{equation*}
    \frac12(a_1 + b_1) = \frac12(a_2 + b_2)
    \quad\text{and}\quad
    \frac12(a_1 - b_1) = \frac12(a_2 - b_2)
  \end{equation*}
  then adding these two equations together gives $a_1 = a_2$.
\end{solution}

\Problem{18} Develop a formula for $\sigma_2(n)$, the sum of the
squares of the positive divisors of $n$.
\begin{solution}
  The first ten values of $\sigma_2$ are
  \begin{center}
    \begin{tabular}{r|rrrrrrrrrr}
      $n$ & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 \\
      $\sigma_2(n)$ & 1 & 5 & 10 & 21 & 26 & 50 & 50 & 85 & 91 & 130
    \end{tabular}.
  \end{center}
  Certainly if $p$ is prime then $\sigma_2(p) = 1 + p^2$. Since the
  divisors of $p^k$ are $1, p, \dots, p^k$, it follows that
  \begin{equation*}
    \sigma_2(p^k) = 1 + p^2 + p^4 + \cdots + p^{2k}
    = \frac{p^{2(k+1)} - 1}{p^2 - 1}.
  \end{equation*}
  Assuming $\sigma_2$ is multiplicative, this suggests a general
  formula. We will now prove that for all positive integers $n$, if
  the prime-power decomposition of $n$ is
  $n = p_1^{e_1}p_2^{e_2}\cdots p_r^{e_r}$, then
  \begin{equation*}
    \sigma_2(n)
    = \sigma_2(p_1^{e_1})\sigma_2(p_2^{e_2})\cdots\sigma_2(p_r^{e_r}).
  \end{equation*}
  Our proof will mimic the proof of Theorem~2 in the text, using
  induction on $r$. For $r = 1$ the statement is trivial, so suppose
  it is true for $r = k$, $k\geq1$. Let $n$ be any integer having
  $k+1$ distinct prime factors:
  \begin{equation*}
    n = p_1^{e_1}p_2^{e_2}\cdots p_k^{e_k}p_{k+1}^{e_{k+1}}.
  \end{equation*}
  Let $N = p_1^{e_1}\cdots p_k^{e_k}$, let $p = p_{k+1}$ and let
  $e = e_{k+1}$ so that $n = Np^e$. If $1, d_1, \dots, d_t$ are the
  positive divisors of $N$, then the divisors of $n$ can be arranged
  \begin{equation*}
    \begin{matrix}
      1 & d_1 & d_2 & \cdots & d_t \\
      p & d_1p & d_2p & \cdots & d_tp \\
      p^2 & d_1p^2 & d_2p^2 & \cdots & d_tp^2 \\
      \vdots & \vdots & \vdots & \ddots & \vdots \\
      p^e & d_1p^e & d_2p^e & \cdots & d_tp^e.
    \end{matrix}
  \end{equation*}
  Summing the squares of these divisors gives
  \begin{align*}
    \sigma_2(n) &= (1 + d_1^2 + d_2^2 + \cdots + d_t^2)
                  (1 + p^2 + p^4 + \cdots + p^{2e}) \\
                &= \sigma_2(N)\sigma_2(p^e).
  \end{align*}
  Now, using the inductive hypothesis, the above becomes
  \begin{equation*}
    \sigma_2(n)
    = \sigma_2(p_1^{e_1})\sigma_2(p_2^{e_2})
    \cdots\sigma_2(p_ke^k)\sigma_2(p_{k+1}e^{k+1})
  \end{equation*}
  as required to complete the proof.
\end{solution}

\Problem{19} Guess a formula for
\begin{equation*}
  \sigma_k(n) = \sum_{d\mid n}d^k,
\end{equation*}
where $k$ is a positive integer.
\begin{solution}
  The previous problem suggests (and indeed a similar proof will show)
  that if $n$ has prime-power decomposition
  $n = p_1^{e_1}\cdots p_r^{e_r}$, then
  \begin{equation*}
    \sigma_k(n) = \sigma_k(p_1^{e_1})\cdots\sigma_k(p_r^{e_r}),
  \end{equation*}
  where
  \begin{equation*}
    \sigma_k(p_i^{e_i})
    = 1 + p_i^k + p_i^{2k} + \cdots + p_i^{e_ik}
    = \frac{p_i^{k(e_i+1)} - 1}{p_i^k - 1},
  \end{equation*}
  for each $i = 1, 2, \dots, r$.
\end{solution}

\Problem{20} Show that the product of the positive divisors of $n$ is
$n^{d(n)/2}$.
\begin{solution}
  Define the arithmetic function $f$ by
  \begin{equation*}
    f(n) = \prod_{d\mid n}d.
  \end{equation*}
  For prime powers $n = p^e$, we have
  \begin{align*}
    f(p^e) &= 1(p)(p^2)\cdots(p^e) \\
           &= p^{1+2+\cdots+e} \\
           &= p^{e(e+1)/2} \\
           &= (p^e)^{(e+1)/2} \\
           &= n^{d(n)/2}.
  \end{align*}
  Note that $n^{d(n)/2}$ is always an integer, since $d(n)$ is only
  odd when $n$ is a perfect square (shown in
  Problem~\ref{problem:divisors:d-n-is-odd-implies-n-is-square}).

  Now, let $n$ have $r$ distinct prime factors. We will use induction
  on $r$ to show that $f(n) = n^{d(n)/2}$. We have already shown
  (above) that this is true when $r = 1$. Assume that it is true when
  $r = k$, for some $k\geq1$. If $n$ has $k + 1$ distinct prime
  factors, then $n$ can be written in prime-power form as
  \begin{equation*}
    n = p_1^{e_1}p_2^{e_2}\cdots p_k^{e_k}p_{k+1}^{e_{k+1}}.
  \end{equation*}
  Now let $N = p_1^{e_1}\cdots p_k^{e_k}$, let $p = p_{k+1}$, and let
  $e = e_{k+1}$. Then $n = Np^e$. If $1, d_1, d_2, \dots, d_t$ are the
  positive divisors of $N$, then we may list the positive divisors of
  $n$ as follows.
  \begin{equation*}
    \begin{matrix}
      1 & d_1 & d_2 & \cdots & d_t \\
      p & d_1p & d_2p & \cdots & d_tp \\
      p^2 & d_1p^2 & d_2p^2 & \cdots & d_tp^2 \\
      \vdots & \vdots & \vdots & \ddots & \vdots \\
      p^e & d_1p^e & d_2p^e & \cdots & d_tp^e
    \end{matrix}
  \end{equation*}
  The product of line $i$ above is
  \begin{align*}
    p^{i-1}(d_1p^{i-1})(d_2p^{i-1})\cdots(d_tp^{i-1})
    &= (p^{i-1})^{t+1}(d_1d_2\cdots d_t) \\
    &= (p^{i-1})^{d(N)}f(N).
  \end{align*}
  Taking the product of all $e+1$ lines gives
  \begin{align*}
    f(n) &= \big(1^{d(N)}f(N)\big)\cdot\big(p^{d(N)}f(N)\big)
    \cdots\big(p^{ed(N)}f(N)\big) \\
         &= \big(p\cdot p^2\cdots p^e\big)^{d(N)}\big(f(N)\big)^{e+1} \\
         &= \big(f(p^e)\big)^{d(N)}\big(f(N)\big)^{d(p^e)}.
  \end{align*}
  Applying the inductive hypothesis then gives
  \begin{align*}
    f(n) &= (p^e)^{d(N)d(p^e)/2}N^{d(N)d(p^e)/2} \\
         &= (p^e)^{d(n)/2}N^{d(n)/2} \\
         &= n^{d(n)/2}.
  \end{align*}
  By induction, the formula works for all positive integers $n$.
\end{solution}
